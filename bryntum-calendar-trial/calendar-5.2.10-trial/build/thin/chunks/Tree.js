/*!
 *
 * Bryntum Calendar 5.2.10 (TRIAL VERSION)
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
(function(a,b){function F(a,b){return _cmpb(b-0x375,a);}const c=a();while(!![]){try{const d=parseInt(F(0x532,0x4f4))/0x1+parseInt(F(0x4f2,0x4b5))/0x2*(-parseInt(F(0x4aa,0x4db))/0x3)+parseInt(F(0x4da,0x4a4))/0x4+-parseInt(F(0x584,0x536))/0x5*(parseInt(F(0x4a6,0x4e1))/0x6)+-parseInt(F(0x4f6,0x4b2))/0x7+-parseInt(F(0x53c,0x513))/0x8*(parseInt(F(0x510,0x520))/0x9)+parseInt(F(0x4e5,0x52a))/0xa*(parseInt(F(0x4bc,0x4da))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(_cmpa,0x838a1));import{_defineProperty,DomHelper,InstancePlugin,Delayable}from'./Editor.js';import{ColumnStore,Column,GridFeatureManager}from'./GridBase.js';let currentParentHasIcon=![];function _cmpG(a,b){return _cmpb(b- -0x16e,a);}function _cmpb(a,b){const c=_cmpa();return _cmpb=function(d,e){d=d-0x129;let f=c[d];return f;},_cmpb(a,b);}class TreeColumn extends Column{static get[_cmpG(0x7,0x6)](){return{'tree':!![],'hideable':![],'minWidth':0x96};}static get[_cmpG(0x47,0x2)](){function H(a,b){return _cmpG(b,a-0x4ad);}return[{'name':H(0x478,0x4ad),'defaultValue':H(0x468,0x46f)},{'name':H(0x477,0x44e),'defaultValue':H(0x46c,0x4a7)},{'name':'collapsedFolderIconCls'},{'name':'expandedFolderIconCls'},{'name':'indentSize','defaultValue':1.7},{'name':'leafIconCls','defaultValue':H(0x4d9,0x527)},{'name':H(0x4e7,0x504),'defaultValue':H(0x46d,0x428)},'renderer'];}static get[_cmpG(0x11,0x3f)](){return'tree';}constructor(a,b){super(...arguments);const c=this;c['shouldHtmlEncode']=c[I(-0xca,-0x112)];function I(a,b){return _cmpG(b,a- -0x10e);}c[I(-0x10f,-0xf7)](I(-0xca,-0xc7),![]),c[I(-0xf3,-0xd7)]&&(c[I(-0xb7,-0xb3)]=c[I(-0xf3,-0xc7)]),c[I(-0xf3,-0xae)]=c[I(-0xbf,-0x8b)][I(-0x12c,-0x123)](c);}[_cmpG(0x2d,0x4f)](a){const b=this,{grid:c,column:d,cellElement:e,row:f,record:g,isExport:h}=a,i=g[J(0x4fc,0x50d)](c[J(0x4bf,0x4fb)]),j=!g[J(0x500,0x4ee)]&&i[J(0x4bc,0x4ea)],k={'className':'b-tree-cell-value'},l=[k],m={'className':J(0x523,0x511),'tag':g['href']?'a':J(0x499,0x4a6),'href':g['href'],'target':g[J(0x4f7,0x4dd)],'children':l},n={'b-tree-parent-row':0x0,'b-tree-collapsed':0x0,'b-tree-expanded':0x0,'b-loading-children':0x0};let o,p,{value:q}=a;if(b[J(0x559,0x528)]){var r;const x=b[J(0x54f,0x528)](a),y=(r=c[J(0x4eb,0x4f1)])===null||r===void 0x0?void 0x0:r[J(0x4ab,0x4f0)](c,{'cellContent':x,'column':d});o=typeof x===J(0x4cf,0x4f2)&&!y,q=y?'':x===![]?e['innerHTML']:x,a[J(0x4e3,0x496)]=x;}function J(a,b){return _cmpG(a,b-0x4d1);}if(!o){var s;q=String((s=q)!==null&&s!==void 0x0?s:'');}if(h)return q;if(!g[J(0x4e0,0x4ee)]){var t;const z=!g[J(0x482,0x497)](c[J(0x4cd,0x4fb)]),A=z?b[J(0x49f,0x49c)]:b[J(0x48b,0x49b)],B=z?b[J(0x4f7,0x4ab)]:b[J(0x48a,0x49a)];n[J(0x49a,0x4c0)]=0x1,n[J(0x4d7,0x526)]=z,n['b-tree-expanded']=!z,n['b-loading-children']=i[J(0x4b0,0x4b0)],e['classList'][J(0x4b9,0x506)]('b-tree-parent-cell'),l[J(0x535,0x523)]({'tag':'i','className':{'b-tree-expander':0x1,[A]:0x1,'b-empty-parent':!i[J(0x489,0x4b0)]&&g[J(0x51b,0x4e3)]!==!![]&&!((t=g[J(0x495,0x4e3)])!==null&&t!==void 0x0&&t[J(0x44e,0x48f)])}}),currentParentHasIcon=p=a[J(0x4aa,0x4eb)]||g[J(0x4e8,0x4eb)]||B;}else e[J(0x4a5,0x4be)]['add']('b-tree-leaf-cell'),p=a[J(0x4ca,0x4eb)]||g[J(0x4b7,0x4eb)]||b['leafIconCls'];p&&l[J(0x4bf,0x4a4)](l[J(0x4d9,0x48f)]-0x1,0x0,{'tag':'i','className':{'b-tree-icon':0x1,[p]:0x1}});if(f[J(0x4e4,0x4d5)]){f[J(0x4f5,0x4ed)](n);if(!g[J(0x50f,0x4ee)]){f[J(0x4f2,0x4d2)](J(0x4a4,0x4d6),!j);if(j)f[J(0x499,0x4b9)]('aria-owns');else for(const C in c[J(0x511,0x4fc)]){var u,v;const D=f['elements'][C];DomHelper[J(0x4af,0x4da)](D,{'aria-owns':(u=g[J(0x506,0x4e3)])!==null&&u!==void 0x0&&u[J(0x4c4,0x48f)]?(v=g[J(0x4e4,0x4e3)])===null||v===void 0x0?void 0x0:v[J(0x4ee,0x4b5)](E=>c['id']+'-'+C+'-'+E['id'])[J(0x4e0,0x49d)]('\x20'):null});}}}o||b[J(0x522,0x51c)]||!q[J(0x4dd,0x51f)]('<')?(o&&Object[J(0x4b3,0x4f7)](k,q),k[J(0x4c5,0x4e3)]=k[J(0x505,0x4e3)]||[],k[J(0x4bd,0x4e3)][J(0x534,0x523)](o?null:q)):k['html']=q;const w=g['childLevel']*b[J(0x4ed,0x49f)]+(g[J(0x4ca,0x4ee)]?currentParentHasIcon?0x2:p?0.5:0.4:0x0);return m[J(0x4b9,0x493)]=J(0x52a,0x4e6)+w+'em',m;}[_cmpG(-0x3d,-0x24)](a){const b=super[K(0xe5,0xcd)](a);function K(a,b){return _cmpG(a,b-0xf1);}return b[K(0xf3,0x10c)]=this[K(0x155,0x148)],b;}}function _cmpa(){const ac=['pluginConfig','classList','suspendRefresh','b-tree-parent-row','addCls','expandIfSingleColumn','all','isParent','expandOnCellClick','onBeforeToggleNode','mixin','36839GVibbC','3bLiPGa','rootNode','_treeColumn','refresh','preventDefault','hiddenByCollapse','4884342NlrldB','setData','onBeforeLoadChildren','setAttribute','fields','beforeToggleNode','isRow','aria-expanded','defaults','featureClass','TreeColumn','setAttributes','.b-tree-expander','rowManager','target','isRoot','Tree#toggleCollapse\x20must\x20be\x20passed\x20a\x20record','getRowFor','columns','51211Bvljsv','children','idField','collapseAll','padding-inline-start:','b-loading-children','configurable','Tree','collapsed','iconCls','renderer','assignCls','isLeaf','record','call','hasFrameworkRenderer','object','parent','construct','then','expandTo','assign','removeCls','info','element','store','subGrids','b-icon\x20b-icon-tree-leaf','modelClass','resumeRefresh','push','1096gJwiUJ','isTogglingNode','traverse','expandNode','client','add','registerColumnType','isDestroyed','requestAnimationFrame','isActionable','editTargetSelector','getCellDataFromEvent','instanceMeta','28575efEvmk','bindStore','type','b-tree-cell-inner','find','toggleCollapseByKey','subGrid','htmlEncode','column','ancestorsExpanded','7330bgKZpl','TreeGrid','$name','collapse','shouldHtmlEncode','registerFeature','collapseByKey','includes','treeRenderer','count','suspendEvents','unshift','5JFIYKu','doDisable','b-tree-collapsed','tree','originalRenderer','focusCell','b-icon\x20b-icon-tree-expand','expandAll','beforeToggleAllNodes','length','b-icon\x20b-icon-tree-collapse','.b-tree-cell-value','653432WISzub','style','onElementPointerUp','scrollRowIntoView','rendererHtml','isExpanded','collapseIfSingleColumn','getCell','expandedFolderIconCls','collapseIconCls','expandIconCls','join','onElementClick','indentSize','1704948zmOLJY','expandByKey','getById','1276010VGcYWS','splice','expandOrCollapseAll','div','_$name','resumeEvents','renderCell','treeColumn','collapsedFolderIconCls','isArray','getCurrentConfig','Tree\x20feature\x20cannot\x20be\x20disabled','detachListeners','isLoadingChildren','onLoadChildren','To\x20use\x20the\x20tree\x20feature,\x20one\x20column\x20should\x20be\x20configured\x20with\x20`type:\x20\x27tree\x27`','bind','b-toggling-node','map','exposeProperties','trigger','expand','removeAttribute','refreshRows','onLoadChildrenException','toggleCollapse'];_cmpa=function(){return ac;};return _cmpa();}_defineProperty(TreeColumn,_cmpG(0x87,0x49),_cmpG(-0x3e,0x8)),ColumnStore[_cmpG(0x49,0x36)](TreeColumn,!![]),TreeColumn[_cmpG(-0x2a,-0x1b)](),TreeColumn['_$name']='TreeColumn';const immediatePromise=Promise['resolve']();class Tree extends InstancePlugin[_cmpG(-0x52,-0xa)](Delayable){static get[_cmpG(0x2b,-0x14)](){function L(a,b){return _cmpG(b,a- -0xfc);}return{'assign':[L(-0xe8,-0x9a),L(-0x140,-0x125),L(-0xb2,-0x68),L(-0x115,-0xf6),L(-0xd7,-0xf0),L(-0x111,-0x12d)],'chain':[L(-0x139,-0x142),L(-0x12f,-0x176),L(-0xbe,-0x109)]};}[_cmpG(0x49,0x23)](a,b){super[M(0x4ad,0x470)](a,b);!this['treeColumn']&&console[M(0x4ad,0x475)](M(0x46b,0x42e));function M(a,b){return _cmpG(a,b-0x44d);}a['store']&&this[M(0x4d1,0x48b)](a[M(0x47f,0x477)]);}[_cmpG(0x58,0x54)](a){function N(a,b){return _cmpG(a,b-0x48f);}if(a)throw new Error(N(0x478,0x46c));}get[_cmpG(0x65,0x2a)](){function O(a,b){return _cmpG(b,a-0x54b);}return this[O(0x57f,0x5b9)][O(0x575,0x599)];}get[_cmpG(-0x20,-0x27)](){const a=this,{columns:b}=a['client'];function P(a,b){return _cmpG(a,b-0x19b);}return(!a['_treeColumn']||!b[P(0x202,0x1e9)](a['_treeColumn']))&&(a[P(0x15c,0x195)]=b[P(0x1c1,0x1dc)](c=>c['isTreeColumn'])),a[P(0x14d,0x195)];}[_cmpG(0x34,0x3e)](a){this[Q(-0x158,-0x13d)](Q(-0x10c,-0xc1));function Q(a,b){return _cmpG(b,a- -0x136);}a['on']({'name':Q(-0x10c,-0xc5),'beforeLoadChildren':'onBeforeLoadChildren','loadChildren':Q(-0x156,-0x13d),'loadChildrenException':Q(-0x14c,-0x17a),'beforeToggleNode':Q(-0x141,-0x18c),'thisObj':this});}async[_cmpG(-0x24,-0x15)](a,b,c=![]){if(a==null)throw new Error(R(0x369,0x338));const d=this,{store:e,client:f}=d,{rowManager:g}=f,h=e[R(0x32c,0x329)](a),i=h[R(0x397,0x38d)](e);function R(a,b){return _cmpG(b,a-0x35b);}if(await e[R(0x346,0x314)](h,b)){const j=g[R(0x36a,0x38b)](h);if(j&&h[R(0x3a1,0x371)]()){const k=d[R(0x334,0x31d)]&&!d[R(0x334,0x374)][R(0x39e,0x355)]['collapsed']&&j[R(0x323,0x317)](d[R(0x334,0x382)]['id']);k&&j[R(0x333,0x35e)](k);}!d['isTogglingNode']&&(f[R(0x384,0x393)][R(0x348,0x312)][R(0x390,0x389)](R(0x33e,0x33d)),d[R(0x38c,0x3a6)]=!![],d[R(0x393,0x3dc)](()=>{f[S(0xe0,0xd7)]['classList']['remove']('b-toggling-node');function S(a,b){return R(b- -0x2ad,a);}d[S(0xa7,0xdf)]=![];})),f['trigger'](i['collapsed']?'collapseNode':R(0x38e,0x385),{'record':h}),f[R(0x341,0x374)]('toggleNode',{'record':h,'collapse':i[R(0x374,0x32e)]});}}async['collapse'](a){function T(a,b){return _cmpG(b,a-0x10a);}return this[T(0xf5,0x130)](a,!![]);}async[_cmpG(0x1e,-0x19)](a){function U(a,b){return _cmpG(a,b-0x540);}return this[U(0x51e,0x52b)](a,![]);}[_cmpG(0x30,-0xb)]({record:a,collapse:b}){function V(a,b){return _cmpG(b,a-0x44d);}this[V(0x481,0x4ac)][V(0x433,0x438)](V(0x450,0x45f),{'record':a,'collapse':b});}[_cmpG(0x4b,0x0)]({source:a,params:b}){const c=a[W(0x7,-0x25)](b[a[W(0x63,0x8b)][W(0x49,0x93)]]),d=this['client'][W(0x41,0x4c)][W(0x45,0x79)](c);function W(a,b){return _cmpG(b,a-0x36);}d===null||d===void 0x0?void 0x0:d[W(0x26,0x1d)](W(0x4c,0x6e));}[_cmpG(-0x1f,-0x20)]({source:a,params:b}){const c=a[X(-0x88,-0x9a)](b[a[X(-0x2c,-0x50)]['idField']]),d=this[X(-0x25,0x27)][X(-0x4e,-0x7d)][X(-0x4a,-0x24)](c);function X(a,b){return _cmpG(b,a- -0x59);}d===null||d===void 0x0?void 0x0:d[X(-0x32,-0x5b)](X(-0x43,-0x3b));}[_cmpG(-0x59,-0x16)]({record:a}){function Y(a,b){return _cmpG(a,b-0x295);}const b=this['client'][Y(0x2de,0x2a0)][Y(0x27f,0x2a4)](a);b===null||b===void 0x0?void 0x0:b[Y(0x2a1,0x2bc)](Y(0x28a,0x2ab));}async[_cmpG(-0x6,-0x2c)](a=!![],b=this['store'][_cmpG(0x3e,-0x7)]){const {client:c,store:d}=this,e=[],f=[];function Z(a,b){return _cmpG(a,b- -0x92);}return c[Z(-0x9b,-0xac)](Z(-0xba,-0xd5),{'collapse':a}),d[Z(0x2,-0x41)](),d[Z(-0x46,-0x60)](g=>{const h=g['instanceMeta'](d);function a0(a,b){return Z(a,b- -0xc2);}if(!g[a0(-0x17d,-0x137)]){if(a&&!h['collapsed'])this[a0(-0x185,-0x169)](g,!![],!![]),f[a0(-0xe6,-0x125)](...g['children']);else!a&&h[a0(-0x143,-0x13b)]&&(Array[a0(-0x15b,-0x179)](g[a0(-0x180,-0x142)])&&f[a0(-0x12a,-0x125)](...g[a0(-0xfc,-0x142)]),e['push'](this[a0(-0x174,-0x169)](g,![],!![])));}},b,b===d['rootNode']),d[Z(-0x7b,-0xbb)](),(a?immediatePromise:Promise[Z(-0xa5,-0xa0)](e))[Z(-0xa2,-0x6e)](()=>{c[a1(-0x236,-0x285)](a);f[a1(-0x261,-0x24f)]&&(a?d[a1(-0x239,-0x26e)]('remove',{'records':f,'isCollapse':!![],'isCollapseAll':!![]}):d[a1(-0x239,-0x25b)]('add',{'records':f,'isExpand':!![],'isExpandAll':!![]}));function a1(a,b){return Z(b,a- -0x18d);}c['trigger']('toggleAllNodes',{'collapse':a});});}async['collapseAll'](){function a2(a,b){return _cmpG(a,b- -0x24d);}return this[a2(-0x265,-0x279)](!![]);}async[_cmpG(-0x7d,-0x44)](){function a3(a,b){return _cmpG(b,a- -0xbb);}return this[a3(-0xe7,-0xe1)](![]);}async['expandTo'](a,b=!![]){const c=this,{store:d,client:e}=c;function a4(a,b){return _cmpG(a,b-0x114);}if(Array[a4(0x13b,0xef)](a)){if(a[a4(0xa3,0xd2)]>0x0){e[a4(0xfd,0x102)]();for(let k=a['length']-0x1;k>=0x0;k--){var f;const l=d['getById'](a[k]);if(k===0x0){var g;(g=e[a4(0x140,0x142)])===null||g===void 0x0?void 0x0:g['call'](e),e[a4(0x156,0x11f)][a4(0x12b,0x10f)]();}await((f=c[a4(0x15c,0x139)])===null||f===void 0x0?void 0x0:f[a4(0x15f,0x133)](c,l,k===0x0));}}return;}const h=d['getById'](a);if(h[a4(0x101,0x150)](c[a4(0x182,0x13e)])[a4(0xea,0x111)]===![])return;if(!h[a4(0x156,0x15a)]()){var j;const m=[];for(let n=h[a4(0x14e,0x136)];n&&!n[a4(0x142,0x121)];n=n['parent']){!n[a4(0xc0,0xda)](d)&&m['unshift'](n);}for(const o of m){!c[a4(0x119,0x14b)]&&await c[a4(0x10b,0xff)](o,![],!![]);}(j=e['refreshRows'])===null||j===void 0x0?void 0x0:j[a4(0x119,0x133)](e);}!c[a4(0x16a,0x14b)]&&b&&await e[a4(0xab,0xd8)](h);}[_cmpG(-0xb,-0x3d)](a){const b=this,c=a['target'],d=b['client'][a5(-0x32,-0x2)](a),e=c['closest'](a5(-0x63,-0x6a));function a5(a,b){return _cmpG(b,a- -0x6d);}(e||b[a5(-0x79,-0xb7)]&&d!==null&&d!==void 0x0&&d['record'][a5(-0x7a,-0xa3)])&&b[a5(-0x82,-0x72)](d[a5(-0x4f,-0x7b)]);}[_cmpG(-0x12,-0x33)](a){function a6(a,b){return _cmpG(b,a- -0xf7);}a[a6(-0xeb,-0xaf)]['closest']('.b-tree-expander')&&a[a6(-0xfb,-0xb4)]();}[_cmpG(0x42,0x42)](){const {focusedCell:a}=this['client'];if((a===null||a===void 0x0?void 0x0:a['rowIndex'])>-0x1&&!a[a7(0x549,0x595)])return this[a7(0x4fb,0x53f)](a['id']),!![];function a7(a,b){return _cmpG(b,a-0x510);}return![];}['expandIfSingleColumn'](){if(this[a8(-0x181,-0x1cb)][a8(-0x1a5,-0x189)][a8(-0x165,-0x12b)]===0x1)return this[a8(-0x1e5,-0x1b8)]();function a8(a,b){return _cmpG(b,a- -0x1b5);}return![];}[_cmpG(-0x2b,-0x30)](){function a9(a,b){return _cmpG(a,b-0x386);}const a=this,{client:b}=a,{focusedCell:c}=b,d=c===null||c===void 0x0?void 0x0:c['record'];if(c!==null&&c!==void 0x0&&c[a9(0x3e1,0x3cb)][a9(0x3da,0x3dc)]&&d[a9(0x373,0x379)]&&d[a9(0x3d5,0x3c2)](b['store'])[a9(0x378,0x39f)])return a[a9(0x355,0x36d)](d),!![];return![];}[_cmpG(-0x30,-0x39)](){function aa(a,b){return _cmpG(b,a-0x22a);}if(this[aa(0x25e,0x24f)][aa(0x23a,0x243)][aa(0x27a,0x2a3)]===0x1)return this[aa(0x277,0x22b)]();return![];}[_cmpG(0x89,0x4d)](){const a=this,{client:b}=a,{focusedCell:c}=b,d=c===null||c===void 0x0?void 0x0:c[ab(0x4f0,0x4c7)];if(c!==null&&c!==void 0x0&&c[ab(0x517,0x4eb)][ab(0x528,0x56c)]){if(d[ab(0x4c5,0x48c)]&&!d[ab(0x50e,0x505)](b[ab(0x4fc,0x540)])['collapsed'])return a['collapse'](d),!![];if(d[ab(0x4f4,0x53d)]&&!d[ab(0x4f4,0x4bd)][ab(0x4df,0x4b4)])return b[ab(0x52a,0x507)]({'record':d[ab(0x4f4,0x523)],'column':c['column']}),!![];}function ab(a,b){return _cmpG(b,a-0x4d2);}return![];}}_defineProperty(Tree,'$name',_cmpG(0x2b,0x18)),_defineProperty(Tree,_cmpG(0x39,0x17),{'expandOnCellClick':![],'keyMap':{'\x20':_cmpG(0x2,0x42),'ArrowRight':_cmpG(-0x3a,-0xf),'Shift+ArrowRight':'expandByKey','ArrowLeft':_cmpG(0x12,-0x39),'Shift+ArrowLeft':_cmpG(0x4e,0x4d)}}),Tree[_cmpG(0x4e,0x7)]='b-tree',Tree[_cmpG(-0x1e,-0x2a)]=_cmpG(0x20,0x18),GridFeatureManager[_cmpG(0x57,0x4c)](Tree,![],'Grid'),GridFeatureManager[_cmpG(0x15,0x4c)](Tree,!![],_cmpG(0x23,0x48));export{Tree,TreeColumn};